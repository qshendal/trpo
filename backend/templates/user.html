<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS ‚Äî –ö–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='user.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-avatar">üîó</div>
                NEXUS<span>PANEL</span>
            </div>

            <div class="user-profile-badge">
                <div class="u-avatar">üë§</div>  
                <div class="user-info">
                    <span class="u-name">{{ user_name if user_name else "–í—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã" }}</span>
                    <span class="u-role">–ö–ª–∏–µ–Ω—Ç</span>
                </div>
                <a href="javascript:void(0)" class="logout-btn" onclick="toggleModal(true)" title="–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <main class="main-content dashboard-container">
        <div class="dashboard-header">
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Nexus</h1>
            <p>–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –≤ –æ–¥–∏–Ω –∫–ª–∏–∫</p>
        </div>

        <div class="dashboard-grid">
            <div class="dash-card create-card">
                <div class="card-icon">‚ú®</div>
                <h3>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞</h3>
                <p>–í—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞, —ç–ª–µ–∫—Ç—Ä–∏–∫–∞ –∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∫–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ —Ä–µ–º–æ–Ω—Ç–∞.</p>
                <a href="{{ url_for('client.create_request_form') }}" class="action-btn primary full-width">–°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å</a>
            </div>

            <div class="dash-card list-card">
                <div class="card-icon">üìÇ</div>
                <h3>–ú–æ–∏ –∑–∞—è–≤–∫–∏</h3>
                <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–±–æ—Ç –∏ –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤.</p>
                <a href="{{ url_for('client.my_requests') }}" class="action-btn secondary full-width">–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫</a>
            </div>
        </div>
    </main>

<div id="logoutModal" class="logout-modal hidden">
    <div class="modal-overlay" onclick="toggleModal(false)"></div>
    <div class="modal-window">
        <div class="modal-body">
            <div class="modal-icon-warning">‚ö†Ô∏è</div>
            <h3>–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?</h3>
            <p>–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.</p>
        </div>
        <div class="modal-btns">
            <button class="action-btn secondary-btn" onclick="toggleModal(false)">–û—Ç–º–µ–Ω–∞</button>
            <a href="{{ url_for('auth.entry_point') }}" class="action-btn danger-btn">–í—ã–π—Ç–∏</a>
        </div>
    </div>
</div>

<script>
    // 1. –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Ç–µ–ø–µ—Ä—å —Ç–æ—á–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ HTML)
    window.toggleModal = function(show) {
        const modal = document.getElementById('logoutModal');
        if (!modal) return;

        if (show) {
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; 
        } else {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
    };

    document.addEventListener('DOMContentLoaded', () => {
        // 2. –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        const page = document.querySelector('.dashboard-container');
        if (page) {
            setTimeout(() => {
                page.classList.add('active');
            }, 100);
        }

        // 3. –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Esc
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') toggleModal(false);
        });
    });
</script>
</body>
</html>