<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Ö–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ ‚Äî –ú–∞—Å—Ç–µ—Ä–∞</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='Masters.css') }}">
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h1 class="logo">üîß –¢–µ—Ö–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h1>
      <p class="subtitle">–ú–∞—Å—Ç–µ—Ä–∞</p>
      <nav class="menu">
        <ul>
          <li><a href="{{ url_for('dashboard') }}"><i class="fas fa-tachometer-alt"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
          <li><a href="{{ url_for('work_planning') }}"><i class="fas fa-calendar-alt"></i> –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç</a></li>
          <li><a href="{{ url_for('equipment_registry') }}"><i class="fas fa-boxes"></i> –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</a></li>
          <li><a href="{{ url_for('masters') }}"><i class="fas fa-user-cog"></i> –ú–∞—Å—Ç–µ—Ä–∞</a></li>
          <li><a href="{{ url_for('reports') }}"><i class="fas fa-chart-bar"></i> –û—Ç—á—ë—Ç—ã</a></li>
        </ul>
      </nav>
    </aside>

    <main class="dashboard">
      <header class="top-bar">
        <h2>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞</h2>
        <button id="openMasterModal" class="assign-btn"><i class="fas fa-user-plus"></i> –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞</button>
      </header>

      <div id="mastersContainer" class="masters-list"></div>
    </main>
  </div>

  <div id="masterModalOverlay" class="modal-overlay hidden">
    <div class="modal-window">
      <span class="modal-close" id="closeMasterModal">&times;</span>
      <h2 id="modalTitle">–ù–∞–∑–Ω–∞—á–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞</h2>
      <div class="modal-content">
        <label for="masterName">–§–ò–û –º–∞—Å—Ç–µ—Ä–∞:</label>
        <input type="text" id="masterName" required>

        <label for="masterSpecialty">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</label>
        <input type="text" id="masterSpecialty" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —ç–ª–µ–∫—Ç—Ä–∏–∫" required>

        <label for="assignDate">–î–∞—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:</label>
        <input type="date" id="assignDate" required>

        <label for="assignedTask">–†–∞–±–æ—Ç–∞/–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</label>
        <input type="text" id="assignedTask" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É –∏–ª–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ" required>

        <label for="masterComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
        <textarea id="masterComment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"></textarea>

        <div class="modal-actions">
          <button id="saveMasterBtn" class="action-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const modal = document.getElementById("masterModalOverlay");
      const openBtn = document.getElementById("openMasterModal");
      const closeBtn = document.getElementById("closeMasterModal");
      const saveBtn = document.getElementById("saveMasterBtn");

      openBtn.addEventListener("click", () => {
        modal.classList.remove("hidden");
      });

      closeBtn.addEventListener("click", () => {
        modal.classList.add("hidden");
      });

      window.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.classList.add("hidden");
        }
      });

      saveBtn.addEventListener("click", () => {
        const payload = {
          name: document.getElementById("masterName").value,
          specialty: document.getElementById("masterSpecialty").value,
          date: document.getElementById("assignDate").value,
          task: document.getElementById("assignedTask").value,
          comment: document.getElementById("masterComment").value
        };
        console.log("–î–∞–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞:", payload);
        modal.classList.add("hidden");
      });
    });
  </script>
</body>
</html>
